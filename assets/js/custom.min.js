(function() {
    'use strict'

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
        .forEach(function(form) {
            form.addEventListener('submit', function(event) {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
})()

function change() {
    var x = document.getElementById('pw').type;

    if (x == 'password') {
        document.getElementById('pw').type = 'text';
        document.getElementById('lihat-pw').innerHTML = '<span class="fas fa-eye" title="Lihat Password" style="color: #624BFF;" id="lihat-pw" onclick="change();"></span>';
    } else {
        document.getElementById('pw').type = 'password';
        document.getElementById('lihat-pw').innerHTML = '<span class="fas fa-eye-slash" title="Lihat Password" id="lihat-pw" onclick="change();"></span>';
    }
}

function change1() {
    var x = document.getElementById('passlama').type;

    if (x == 'password') {
        document.getElementById('passlama').type = 'text';
        document.getElementById('lihatpasslama').innerHTML = '<span class="fas fa-eye" title="Lihat Password" style="color: #624BFF;" id="lihatpasslama" onclick="change1();"></span>';
    } else {
        document.getElementById('passlama').type = 'password';
        document.getElementById('lihatpasslama').innerHTML = '<span class="fas fa-eye-slash" title="Lihat Password" id="lihatpasslama" onclick="change1();"></span>';
    }
}

function change2() {
    var x = document.getElementById('passbaru').type;

    if (x == 'password') {
        document.getElementById('passbaru').type = 'text';
        document.getElementById('lihatpassbaru').innerHTML = '<span class="fas fa-eye" title="Lihat Password" style="color: #624BFF;" id="lihatpassbaru" onclick="change2();"></span>';
    } else {
        document.getElementById('passbaru').type = 'password';
        document.getElementById('lihatpassbaru').innerHTML = '<span class="fas fa-eye-slash" title="Lihat Password" id="lihatpassbaru" onclick="change2();"></span>';
    }
}

function change3() {
    var x = document.getElementById('confirm').type;

    if (x == 'password') {
        document.getElementById('confirm').type = 'text';
        document.getElementById('lihatconfirm').innerHTML = '<span class="fas fa-eye" title="Lihat Password" style="color: #198754;" id="lihatconfirm" onclick="change3();"></span>';
    } else {
        document.getElementById('confirm').type = 'password';
        document.getElementById('lihatconfirm').innerHTML = '<span class="fas fa-eye-slash" title="Lihat Password" id="lihatconfirm" onclick="change3();"></span>';
    }
}

$(function() {
    $("#example1").DataTable();
    $("#example2").DataTable();
    $("#example3").DataTable();
    // $('#example2').DataTable({
    //     "paging": true,
    //     "lengthChange": false,
    //     "searching": false,
    //     "ordering": true,
    //     "info": true,
    //     "autoWidth": false,
    // });
    // $('.select2').select2();
});


$('.alert-logout').on('click', function() {
    var getLink = $(this).attr('href');
    swal.fire({
            title: 'Konfirmasi Log Out !',
            html: 'Anda Akan Keluar Dari Aplikasi, Lanjutkan ?',
            icon: "warning",
            showCancelButton: true,
        })
        .then((result) => {
            if (result.isConfirmed) {
                window.location.href = getLink
            }
        });
    return false;
});

$('.alert-hapus').on('click', function() {
    var getLink = $(this).attr('href');
    swal.fire({
            title: 'Konfirmasi Hapus Data !',
            html: 'Data Akan Dihapus, Lanjutkan ?',
            icon: "warning",
            showCancelButton: true,
        })
        .then((result) => {
            if (result.isConfirmed) {
                window.location.href = getLink
            }
        });
    return false;
});

$('.alert-verif').on('click', function() {
    var getLink = $(this).attr('href');
    swal.fire({
            title: 'Konfirmasi Verifikasi !',
            html: 'Data Akan Diverifikasi, Lanjutkan ?',
            icon: "warning",
            showCancelButton: true,
        })
        .then((result) => {
            if (result.isConfirmed) {
                window.location.href = getLink
            }
        });
    return false;
});

$(document).ready(function() {
    window.setTimeout(function() {
        $("#notif").fadeTo(500, 0).slideUp(500, function() {
            $(this).remove();
        });
    }, 2000);
    window.setTimeout(function() {
        $("#notif2").fadeTo(500, 0).slideUp(500, function() {
            $(this).remove();
        });
    }, 2000);
});

let rupiah = document.getElementsByClassName("form-control rupiah");

rupiah.forEach(function(rp) {
    rp.addEventListener("keyup", function(e) {
        //this function does stuff
        rp.value = formatRupiah(this.value, 'Rp. ');
    });
});

function formatRupiah(angka, prefix) {
    var number_string = angka.replace(/[^,\d]/g, '').toString(),
        split = number_string.split(','),
        sisa = split[0].length % 3,
        rupiah = split[0].substr(0, sisa),
        ribuan = split[0].substr(sisa).match(/\d{3}/gi);

    // tambahkan titik jika yang di input sudah menjadi angka ribuan
    if (ribuan) {
        separator = sisa ? '.' : '';
        rupiah += separator + ribuan.join('.');
    }

    rupiah = split[1] != undefined ? rupiah + ',' + split[1] : rupiah;
    return prefix == undefined ? rupiah : (rupiah ? 'Rp. ' + rupiah : '');
}

// function hanyaAngka(evt) {
//     var charCode = (evt.which) ? evt.which : event.keyCode
//     if (charCode > 31 && (charCode < 48 || charCode > 57))
//         return false;
//     return true;
// }